{"remainingRequest":"/Users/zachjohnson/Desktop/Projects/Committed Unity/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/zachjohnson/Desktop/Projects/Committed Unity/src/components/AttendanceChecker.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/zachjohnson/Desktop/Projects/Committed Unity/src/components/AttendanceChecker.vue","mtime":1699554717790},{"path":"/Users/zachjohnson/Desktop/Projects/Committed Unity/node_modules/cache-loader/dist/cjs.js","mtime":1699554827551},{"path":"/Users/zachjohnson/Desktop/Projects/Committed Unity/node_modules/babel-loader/lib/index.js","mtime":1699554827558},{"path":"/Users/zachjohnson/Desktop/Projects/Committed Unity/node_modules/cache-loader/dist/cjs.js","mtime":1699554827551},{"path":"/Users/zachjohnson/Desktop/Projects/Committed Unity/node_modules/vue-loader/lib/index.js","mtime":1699554827697}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGV2ZW50QnVzIH0gZnJvbSAiLi4vbWFpbiI7CmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkF0dGVuZGFuY2VDaGVja2VyIiwKICBwcm9wczogewogICAgbWVldGluZ0NvZGU6IFN0cmluZywKICAgIG1lZXRpbmdJRDogU3RyaW5nLAogICAgYXR0ZW5kZWVzX2lkczogQXJyYXksCiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgYXR0ZW5kYW5jZUNvZGU6ICIiLAogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIG1lZXRpbmc6IHVuZGVmaW5lZCwKICAgICAgdXNlcjogIiIsCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgZ2V0VXNlcigpIHsKICAgICAgYXhpb3MKICAgICAgICAuZ2V0KGAvYXBpL3VzZXJzLyR7dGhpcy4kY29va2llLmdldCgiYXV0aC11c2VybmFtZSIpfWApCiAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgICB0aGlzLnVzZXIgPSByZXNwb25zZS5kYXRhOwogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKCgpID0+IHsKICAgICAgICAgIHRoaXMudXNlciA9ICIiOwogICAgICAgIH0pOwogICAgfSwKICAgIGNoZWNrSW4oKSB7CiAgICAgIGlmICh0aGlzLmF0dGVuZGFuY2VDb2RlICE9IHRoaXMubWVldGluZ0NvZGUpIHsKICAgICAgICBldmVudEJ1cy4kZW1pdCgiZXJyb3ItbXNnIiwgewogICAgICAgICAgZXJyb3JNc2c6ICJNZWV0aW5nIGF0dGVuZGFuY2UgY29kZSBpcyBub3QgdmFsaWQuIiwKICAgICAgICB9KTsKICAgICAgICByZXR1cm47CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaWYgKCF0aGlzLmF0dGVuZGVlc19pZHMuaW5jbHVkZXModGhpcy51c2VyLl9pZCkpIHsKICAgICAgICAgIGF4aW9zCiAgICAgICAgICAgIC5wYXRjaChgYXBpL21lZXRpbmdzLyR7dGhpcy5tZWV0aW5nSUR9L2F0dGVuZGFuY2VgLCB7CiAgICAgICAgICAgICAgdXNlcklkOiB0aGlzLnVzZXIuX2lkLAogICAgICAgICAgICAgIG1lZXRpbmdJZDogdGhpcy5tZWV0aW5nSUQsCiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIC50aGVuKCgpID0+IHsKICAgICAgICAgICAgICB0aGlzLmF0dGVuZGFuY2VDb2RlID0gIiI7CiAgICAgICAgICAgICAgdGhpcy52YWxpZCA9IHRydWU7CiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHsKICAgICAgICAgICAgICBjb25zb2xlLmxvZygiRVJST1IgSEVSRSIsIGVycm9yKQogICAgICAgICAgICAgIGV2ZW50QnVzLiRlbWl0KCJlcnJvci1tc2ciLCB7CiAgICAgICAgICAgICAgICBlcnJvck1zZzogZXJyb3IucmVzcG9uc2UuZGF0YS5lcnJvciwKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICBheGlvcwogICAgICAgICAgICAucGF0Y2goIi9hcGkvdXNlcnMvcG9pbnQiKQogICAgICAgICAgICAudGhlbigoKSA9PiB7CiAgICAgICAgICAgICAgZXZlbnRCdXMuJGVtaXQoImluY3JlbWVudCIpOwogICAgICAgICAgICB9KQogICAgICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7CiAgICAgICAgICAgICAgZXZlbnRCdXMuJGVtaXQoImVycm9yLW1zZyIsIHsKICAgICAgICAgICAgICAgIGVycm9yTXNnOiBlcnJvci5yZXNwb25zZS5kYXRhLmVycm9yLAogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KTsKICAgICAgICAgIGV2ZW50QnVzLiRlbWl0KCJzdWNjZXNzLW1zZyIsIHsKICAgICAgICAgICAgc3VjY2Vzc01zZzogIllvdSBjaGVja2VkIGluISIsCiAgICAgICAgICB9KTsKICAgICAgICAgIGV2ZW50QnVzLiRlbWl0KCJhdHRlbmQtc3VjY2VzcyIsIHt9KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgZXZlbnRCdXMuJGVtaXQoImVycm9yLW1zZyIsIHsKICAgICAgICAgICAgZXJyb3JNc2c6ICJZb3UgaGF2ZSBhbHJlYWR5IGNoZWNrZWQgaW50byB0aGlzIG1lZXRpbmcuIiwKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfQogICAgfSwKICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uICgpIHsKICAgIHRoaXMuZ2V0VXNlcigpOwogIH0sCn07Cg=="},{"version":3,"sources":["AttendanceChecker.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAkBA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"AttendanceChecker.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"subcontainer\">\n    <div class=\"check-in\">\n      <v-text-field\n        style=\"max-width: 150px\"\n        v-model=\"attendanceCode\"\n        :counter=\"5\"\n        label=\"Attendance Code\"\n        append-icon=\"mdi-check-bold\"\n        @click:append=\"checkIn\"\n        required\n      ></v-text-field>\n    </div>\n    <span>{{ meeting }}</span>\n  </div>\n</template>\n\n<script>\nimport { eventBus } from \"../main\";\nimport axios from \"axios\";\n\nexport default {\n  name: \"AttendanceChecker\",\n  props: {\n    meetingCode: String,\n    meetingID: String,\n    attendees_ids: Array,\n  },\n  data() {\n    return {\n      attendanceCode: \"\",\n      valid: false,\n      meeting: undefined,\n      user: \"\",\n    };\n  },\n  methods: {\n    getUser() {\n      axios\n        .get(`/api/users/${this.$cookie.get(\"auth-username\")}`)\n        .then((response) => {\n          this.user = response.data;\n        })\n        .catch(() => {\n          this.user = \"\";\n        });\n    },\n    checkIn() {\n      if (this.attendanceCode != this.meetingCode) {\n        eventBus.$emit(\"error-msg\", {\n          errorMsg: \"Meeting attendance code is not valid.\",\n        });\n        return;\n      } else {\n        if (!this.attendees_ids.includes(this.user._id)) {\n          axios\n            .patch(`api/meetings/${this.meetingID}/attendance`, {\n              userId: this.user._id,\n              meetingId: this.meetingID,\n            })\n            .then(() => {\n              this.attendanceCode = \"\";\n              this.valid = true;\n            })\n            .catch((error) => {\n              console.log(\"ERROR HERE\", error)\n              eventBus.$emit(\"error-msg\", {\n                errorMsg: error.response.data.error,\n              });\n            });\n          axios\n            .patch(\"/api/users/point\")\n            .then(() => {\n              eventBus.$emit(\"increment\");\n            })\n            .catch((error) => {\n              eventBus.$emit(\"error-msg\", {\n                errorMsg: error.response.data.error,\n              });\n            });\n          eventBus.$emit(\"success-msg\", {\n            successMsg: \"You checked in!\",\n          });\n          eventBus.$emit(\"attend-success\", {});\n        } else {\n          eventBus.$emit(\"error-msg\", {\n            errorMsg: \"You have already checked into this meeting.\",\n          });\n        }\n      }\n    },\n  },\n  mounted: function () {\n    this.getUser();\n  },\n};\n</script>\n\n<style>\n.check-in {\n  display: flex;\n  justify-content: center;\n}\n\n.message {\n  display: flex;\n  justify-content: center;\n  width: 60%;\n}\n\n.card {\n  display: flex;\n  justify-content: center;\n}\n</style>\n"]}]}