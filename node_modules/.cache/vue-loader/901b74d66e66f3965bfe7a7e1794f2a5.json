{"remainingRequest":"/Users/zachjohnson/Desktop/Projects/Committed Unity/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/zachjohnson/Desktop/Projects/Committed Unity/src/components/AttendanceChecker.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"/Users/zachjohnson/Desktop/Projects/Committed Unity/src/components/AttendanceChecker.vue","mtime":1699554717790},{"path":"/Users/zachjohnson/Desktop/Projects/Committed Unity/node_modules/css-loader/dist/cjs.js","mtime":1699554827634},{"path":"/Users/zachjohnson/Desktop/Projects/Committed Unity/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1699554827893},{"path":"/Users/zachjohnson/Desktop/Projects/Committed Unity/node_modules/postcss-loader/src/index.js","mtime":1699554827541},{"path":"/Users/zachjohnson/Desktop/Projects/Committed Unity/node_modules/cache-loader/dist/cjs.js","mtime":1699554827551},{"path":"/Users/zachjohnson/Desktop/Projects/Committed Unity/node_modules/vue-loader/lib/index.js","mtime":1699554827697}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLmNoZWNrLWluIHsKICBkaXNwbGF5OiBmbGV4OwogIGp1c3RpZnktY29udGVudDogY2VudGVyOwp9CgoubWVzc2FnZSB7CiAgZGlzcGxheTogZmxleDsKICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsKICB3aWR0aDogNjAlOwp9CgouY2FyZCB7CiAgZGlzcGxheTogZmxleDsKICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsKfQo="},{"version":3,"sources":["AttendanceChecker.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"AttendanceChecker.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"subcontainer\">\n    <div class=\"check-in\">\n      <v-text-field\n        style=\"max-width: 150px\"\n        v-model=\"attendanceCode\"\n        :counter=\"5\"\n        label=\"Attendance Code\"\n        append-icon=\"mdi-check-bold\"\n        @click:append=\"checkIn\"\n        required\n      ></v-text-field>\n    </div>\n    <span>{{ meeting }}</span>\n  </div>\n</template>\n\n<script>\nimport { eventBus } from \"../main\";\nimport axios from \"axios\";\n\nexport default {\n  name: \"AttendanceChecker\",\n  props: {\n    meetingCode: String,\n    meetingID: String,\n    attendees_ids: Array,\n  },\n  data() {\n    return {\n      attendanceCode: \"\",\n      valid: false,\n      meeting: undefined,\n      user: \"\",\n    };\n  },\n  methods: {\n    getUser() {\n      axios\n        .get(`/api/users/${this.$cookie.get(\"auth-username\")}`)\n        .then((response) => {\n          this.user = response.data;\n        })\n        .catch(() => {\n          this.user = \"\";\n        });\n    },\n    checkIn() {\n      if (this.attendanceCode != this.meetingCode) {\n        eventBus.$emit(\"error-msg\", {\n          errorMsg: \"Meeting attendance code is not valid.\",\n        });\n        return;\n      } else {\n        if (!this.attendees_ids.includes(this.user._id)) {\n          axios\n            .patch(`api/meetings/${this.meetingID}/attendance`, {\n              userId: this.user._id,\n              meetingId: this.meetingID,\n            })\n            .then(() => {\n              this.attendanceCode = \"\";\n              this.valid = true;\n            })\n            .catch((error) => {\n              console.log(\"ERROR HERE\", error)\n              eventBus.$emit(\"error-msg\", {\n                errorMsg: error.response.data.error,\n              });\n            });\n          axios\n            .patch(\"/api/users/point\")\n            .then(() => {\n              eventBus.$emit(\"increment\");\n            })\n            .catch((error) => {\n              eventBus.$emit(\"error-msg\", {\n                errorMsg: error.response.data.error,\n              });\n            });\n          eventBus.$emit(\"success-msg\", {\n            successMsg: \"You checked in!\",\n          });\n          eventBus.$emit(\"attend-success\", {});\n        } else {\n          eventBus.$emit(\"error-msg\", {\n            errorMsg: \"You have already checked into this meeting.\",\n          });\n        }\n      }\n    },\n  },\n  mounted: function () {\n    this.getUser();\n  },\n};\n</script>\n\n<style>\n.check-in {\n  display: flex;\n  justify-content: center;\n}\n\n.message {\n  display: flex;\n  justify-content: center;\n  width: 60%;\n}\n\n.card {\n  display: flex;\n  justify-content: center;\n}\n</style>\n"]}]}