{"remainingRequest":"/Users/zachjohnson/Desktop/Projects/Committed Unity/node_modules/babel-loader/lib/index.js!/Users/zachjohnson/Desktop/Projects/Committed Unity/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/zachjohnson/Desktop/Projects/Committed Unity/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/zachjohnson/Desktop/Projects/Committed Unity/src/components/AttendanceChecker.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/zachjohnson/Desktop/Projects/Committed Unity/src/components/AttendanceChecker.vue","mtime":1699554717790},{"path":"/Users/zachjohnson/Desktop/Projects/Committed Unity/babel.config.js","mtime":1699554717779},{"path":"/Users/zachjohnson/Desktop/Projects/Committed Unity/node_modules/cache-loader/dist/cjs.js","mtime":1699554827551},{"path":"/Users/zachjohnson/Desktop/Projects/Committed Unity/node_modules/babel-loader/lib/index.js","mtime":1699554827558},{"path":"/Users/zachjohnson/Desktop/Projects/Committed Unity/node_modules/cache-loader/dist/cjs.js","mtime":1699554827551},{"path":"/Users/zachjohnson/Desktop/Projects/Committed Unity/node_modules/vue-loader/lib/index.js","mtime":1699554827697}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXM3LmFycmF5LmluY2x1ZGVzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXM2LnN0cmluZy5pbmNsdWRlcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCB7IGV2ZW50QnVzIH0gZnJvbSAiLi4vbWFpbiI7CmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiQXR0ZW5kYW5jZUNoZWNrZXIiLAogIHByb3BzOiB7CiAgICBtZWV0aW5nQ29kZTogU3RyaW5nLAogICAgbWVldGluZ0lEOiBTdHJpbmcsCiAgICBhdHRlbmRlZXNfaWRzOiBBcnJheQogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGF0dGVuZGFuY2VDb2RlOiAiIiwKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBtZWV0aW5nOiB1bmRlZmluZWQsCiAgICAgIHVzZXI6ICIiCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgZ2V0VXNlcjogZnVuY3Rpb24gZ2V0VXNlcigpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIGF4aW9zLmdldCgiL2FwaS91c2Vycy8iLmNvbmNhdCh0aGlzLiRjb29raWUuZ2V0KCJhdXRoLXVzZXJuYW1lIikpKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIF90aGlzLnVzZXIgPSByZXNwb25zZS5kYXRhOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXMudXNlciA9ICIiOwogICAgICB9KTsKICAgIH0sCiAgICBjaGVja0luOiBmdW5jdGlvbiBjaGVja0luKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIGlmICh0aGlzLmF0dGVuZGFuY2VDb2RlICE9IHRoaXMubWVldGluZ0NvZGUpIHsKICAgICAgICBldmVudEJ1cy4kZW1pdCgiZXJyb3ItbXNnIiwgewogICAgICAgICAgZXJyb3JNc2c6ICJNZWV0aW5nIGF0dGVuZGFuY2UgY29kZSBpcyBub3QgdmFsaWQuIgogICAgICAgIH0pOwogICAgICAgIHJldHVybjsKICAgICAgfSBlbHNlIHsKICAgICAgICBpZiAoIXRoaXMuYXR0ZW5kZWVzX2lkcy5pbmNsdWRlcyh0aGlzLnVzZXIuX2lkKSkgewogICAgICAgICAgYXhpb3MucGF0Y2goImFwaS9tZWV0aW5ncy8iLmNvbmNhdCh0aGlzLm1lZXRpbmdJRCwgIi9hdHRlbmRhbmNlIiksIHsKICAgICAgICAgICAgdXNlcklkOiB0aGlzLnVzZXIuX2lkLAogICAgICAgICAgICBtZWV0aW5nSWQ6IHRoaXMubWVldGluZ0lECiAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgX3RoaXMyLmF0dGVuZGFuY2VDb2RlID0gIiI7CiAgICAgICAgICAgIF90aGlzMi52YWxpZCA9IHRydWU7CiAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgICAgY29uc29sZS5sb2coIkVSUk9SIEhFUkUiLCBlcnJvcik7CiAgICAgICAgICAgIGV2ZW50QnVzLiRlbWl0KCJlcnJvci1tc2ciLCB7CiAgICAgICAgICAgICAgZXJyb3JNc2c6IGVycm9yLnJlc3BvbnNlLmRhdGEuZXJyb3IKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9KTsKICAgICAgICAgIGF4aW9zLnBhdGNoKCIvYXBpL3VzZXJzL3BvaW50IikudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGV2ZW50QnVzLiRlbWl0KCJpbmNyZW1lbnQiKTsKICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgICBldmVudEJ1cy4kZW1pdCgiZXJyb3ItbXNnIiwgewogICAgICAgICAgICAgIGVycm9yTXNnOiBlcnJvci5yZXNwb25zZS5kYXRhLmVycm9yCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSk7CiAgICAgICAgICBldmVudEJ1cy4kZW1pdCgic3VjY2Vzcy1tc2ciLCB7CiAgICAgICAgICAgIHN1Y2Nlc3NNc2c6ICJZb3UgY2hlY2tlZCBpbiEiCiAgICAgICAgICB9KTsKICAgICAgICAgIGV2ZW50QnVzLiRlbWl0KCJhdHRlbmQtc3VjY2VzcyIsIHt9KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgZXZlbnRCdXMuJGVtaXQoImVycm9yLW1zZyIsIHsKICAgICAgICAgICAgZXJyb3JNc2c6ICJZb3UgaGF2ZSBhbHJlYWR5IGNoZWNrZWQgaW50byB0aGlzIG1lZXRpbmcuIgogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdGhpcy5nZXRVc2VyKCk7CiAgfQp9Ow=="},{"version":3,"sources":["AttendanceChecker.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AAkBA,SAAA,QAAA;AACA,OAAA,KAAA,MAAA,OAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,mBADA;AAEA,EAAA,KAAA,EAAA;AACA,IAAA,WAAA,EAAA,MADA;AAEA,IAAA,SAAA,EAAA,MAFA;AAGA,IAAA,aAAA,EAAA;AAHA,GAFA;AAOA,EAAA,IAPA,kBAOA;AACA,WAAA;AACA,MAAA,cAAA,EAAA,EADA;AAEA,MAAA,KAAA,EAAA,KAFA;AAGA,MAAA,OAAA,EAAA,SAHA;AAIA,MAAA,IAAA,EAAA;AAJA,KAAA;AAMA,GAdA;AAeA,EAAA,OAAA,EAAA;AACA,IAAA,OADA,qBACA;AAAA;;AACA,MAAA,KAAA,CACA,GADA,sBACA,KAAA,OAAA,CAAA,GAAA,CAAA,eAAA,CADA,GAEA,IAFA,CAEA,UAAA,QAAA,EAAA;AACA,QAAA,KAAA,CAAA,IAAA,GAAA,QAAA,CAAA,IAAA;AACA,OAJA,EAKA,KALA,CAKA,YAAA;AACA,QAAA,KAAA,CAAA,IAAA,GAAA,EAAA;AACA,OAPA;AAQA,KAVA;AAWA,IAAA,OAXA,qBAWA;AAAA;;AACA,UAAA,KAAA,cAAA,IAAA,KAAA,WAAA,EAAA;AACA,QAAA,QAAA,CAAA,KAAA,CAAA,WAAA,EAAA;AACA,UAAA,QAAA,EAAA;AADA,SAAA;AAGA;AACA,OALA,MAKA;AACA,YAAA,CAAA,KAAA,aAAA,CAAA,QAAA,CAAA,KAAA,IAAA,CAAA,GAAA,CAAA,EAAA;AACA,UAAA,KAAA,CACA,KADA,wBACA,KAAA,SADA,kBACA;AACA,YAAA,MAAA,EAAA,KAAA,IAAA,CAAA,GADA;AAEA,YAAA,SAAA,EAAA,KAAA;AAFA,WADA,EAKA,IALA,CAKA,YAAA;AACA,YAAA,MAAA,CAAA,cAAA,GAAA,EAAA;AACA,YAAA,MAAA,CAAA,KAAA,GAAA,IAAA;AACA,WARA,EASA,KATA,CASA,UAAA,KAAA,EAAA;AACA,YAAA,OAAA,CAAA,GAAA,CAAA,YAAA,EAAA,KAAA;AACA,YAAA,QAAA,CAAA,KAAA,CAAA,WAAA,EAAA;AACA,cAAA,QAAA,EAAA,KAAA,CAAA,QAAA,CAAA,IAAA,CAAA;AADA,aAAA;AAGA,WAdA;AAeA,UAAA,KAAA,CACA,KADA,CACA,kBADA,EAEA,IAFA,CAEA,YAAA;AACA,YAAA,QAAA,CAAA,KAAA,CAAA,WAAA;AACA,WAJA,EAKA,KALA,CAKA,UAAA,KAAA,EAAA;AACA,YAAA,QAAA,CAAA,KAAA,CAAA,WAAA,EAAA;AACA,cAAA,QAAA,EAAA,KAAA,CAAA,QAAA,CAAA,IAAA,CAAA;AADA,aAAA;AAGA,WATA;AAUA,UAAA,QAAA,CAAA,KAAA,CAAA,aAAA,EAAA;AACA,YAAA,UAAA,EAAA;AADA,WAAA;AAGA,UAAA,QAAA,CAAA,KAAA,CAAA,gBAAA,EAAA,EAAA;AACA,SA9BA,MA8BA;AACA,UAAA,QAAA,CAAA,KAAA,CAAA,WAAA,EAAA;AACA,YAAA,QAAA,EAAA;AADA,WAAA;AAGA;AACA;AACA;AAtDA,GAfA;AAuEA,EAAA,OAAA,EAAA,mBAAA;AACA,SAAA,OAAA;AACA;AAzEA,CAAA","sourcesContent":["<template>\n  <div class=\"subcontainer\">\n    <div class=\"check-in\">\n      <v-text-field\n        style=\"max-width: 150px\"\n        v-model=\"attendanceCode\"\n        :counter=\"5\"\n        label=\"Attendance Code\"\n        append-icon=\"mdi-check-bold\"\n        @click:append=\"checkIn\"\n        required\n      ></v-text-field>\n    </div>\n    <span>{{ meeting }}</span>\n  </div>\n</template>\n\n<script>\nimport { eventBus } from \"../main\";\nimport axios from \"axios\";\n\nexport default {\n  name: \"AttendanceChecker\",\n  props: {\n    meetingCode: String,\n    meetingID: String,\n    attendees_ids: Array,\n  },\n  data() {\n    return {\n      attendanceCode: \"\",\n      valid: false,\n      meeting: undefined,\n      user: \"\",\n    };\n  },\n  methods: {\n    getUser() {\n      axios\n        .get(`/api/users/${this.$cookie.get(\"auth-username\")}`)\n        .then((response) => {\n          this.user = response.data;\n        })\n        .catch(() => {\n          this.user = \"\";\n        });\n    },\n    checkIn() {\n      if (this.attendanceCode != this.meetingCode) {\n        eventBus.$emit(\"error-msg\", {\n          errorMsg: \"Meeting attendance code is not valid.\",\n        });\n        return;\n      } else {\n        if (!this.attendees_ids.includes(this.user._id)) {\n          axios\n            .patch(`api/meetings/${this.meetingID}/attendance`, {\n              userId: this.user._id,\n              meetingId: this.meetingID,\n            })\n            .then(() => {\n              this.attendanceCode = \"\";\n              this.valid = true;\n            })\n            .catch((error) => {\n              console.log(\"ERROR HERE\", error)\n              eventBus.$emit(\"error-msg\", {\n                errorMsg: error.response.data.error,\n              });\n            });\n          axios\n            .patch(\"/api/users/point\")\n            .then(() => {\n              eventBus.$emit(\"increment\");\n            })\n            .catch((error) => {\n              eventBus.$emit(\"error-msg\", {\n                errorMsg: error.response.data.error,\n              });\n            });\n          eventBus.$emit(\"success-msg\", {\n            successMsg: \"You checked in!\",\n          });\n          eventBus.$emit(\"attend-success\", {});\n        } else {\n          eventBus.$emit(\"error-msg\", {\n            errorMsg: \"You have already checked into this meeting.\",\n          });\n        }\n      }\n    },\n  },\n  mounted: function () {\n    this.getUser();\n  },\n};\n</script>\n\n<style>\n.check-in {\n  display: flex;\n  justify-content: center;\n}\n\n.message {\n  display: flex;\n  justify-content: center;\n  width: 60%;\n}\n\n.card {\n  display: flex;\n  justify-content: center;\n}\n</style>\n"],"sourceRoot":"src/components"}]}